// forms.js or your main script file

import formLogic from './form-logic.js';

(function(global) {
    const LiveBlade = {};

    /**
     * Core function to load content via AJAX and inject into a target element.
     * Supports dynamic HTTP methods and route names.
     * 
     * @param {String} routeName - The Laravel route name.
     * @param {String} method - HTTP method ('GET', 'POST', 'PUT', 'PATCH', 'DELETE').
     * @param {Object} data - Data to be sent with the request (optional).
     * @param {String} targetSelector - The CSS selector for the DOM element to update.
     */
    
    LiveBlade.load = function(routeName, method = 'GET', data = {}, targetSelector, componentToReload = '') {
        // Delegate the actual loading logic to formLogic
        formLogic.load(routeName, method, data, targetSelector, componentToReload);
    };


    /**
     * Core function to load content via AJAX and inject into a target element.
     * Supports reusability in deleting items.
     * 
     * @param {String} deleteUrl - The Laravel route name/link.
     */
    LiveBlade.loop = function(deleteUrl) {
        return new Promise((resolve, reject) => {
            formLogic.loopDeleteForms(deleteUrl)
        });
    };


    /**
     * Core function to load content via AJAX and inject into a target element.
     * Supports reusability in updating items.
     * 
     * @param {String} updateUrl - The Laravel route name/link.
     * @param {Object} data - data to be removed from DOM  (optional).
     * @param {String} componentToReload - component to refresh.
     */
    LiveBlade.editLoop = function(data = {}, updateUrl, componentToReload='') {
        return  formLogic.loopUpdateForms(data, updateUrl, componentToReload)
    };


    /**
     * Core function to load content via AJAX and inject into a target element.
     * Supports reusability in searching items.
     * 
     * @param {String} inputId - Input value from .
     * @param {String} tableId - component to refresh.
     */
    LiveBlade.searchTableItems = function(inputId, tableId) {
        formLogic.beginTableSearch(inputId, tableId)
    };

    /**
     * Core function to load content via AJAX and inject into a target element.
     * Supports reusability in searching items.
     * 
     * @param {String} inputId - Input value from .
     * @param {String} tableId - component to refresh.
     */
    LiveBlade.uploadImage = function(file, uploadRoute, fileInputName) {
        formLogic.beginUploadImage(file, uploadRoute, fileInputName)
    };



    /**
     * Core function to load content via AJAX and inject into a target element.
     * Supports reusability in updating status of items.
     * 
     * @param {String} updateUrl - The Laravel route name/link.
     */
    LiveBlade.loopUpdateStatus = function(updateUrl, selectedStatus) {
        formLogic.loopUpdateStatusForms(updateUrl, selectedStatus)
    };


    /**
     * Core function to load content via AJAX and inject into a target element.
     * Supports reusability in updating items.
     * 
     * @param {String} updateUrl - The Laravel route name/link.
     * @param {Object} data - data to be removed from DOM  (optional).
     * @param {String} componentToReload - component to refresh.
     */
    LiveBlade.submitFormItems = function(data = {}) {
        return  formLogic.submitFormEntities(data)
    };

    // Expose LiveBlade to the global scope
    global.LiveBlade = LiveBlade;
})(window);
